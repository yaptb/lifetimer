<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="LifeTimer.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:LifeTimer"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:tb="using:H.NotifyIcon"
    xmlns:ec="using:LifeTimer.Controls.Buttons"
    xmlns:pd ="using:LifeTimer.Controls.Pomodoro"
    mc:Ignorable="d"
    >

    <Grid x:Name="WindowGrid" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Transparent">

        <Border x:Name="WindowBorder" 
           BorderThickness="3"
           CornerRadius="20"
           Padding="6"
               Margin="4"
           >
            <Grid x:Name="ContentGrid" >
            
            
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Grid.Resources>
                <!-- Nag Fade In Storyboard -->
                <Storyboard x:Name="FadeInStoryboard">
                    <DoubleAnimation Storyboard.TargetName="FreeVersionNagOverlay"
                         Storyboard.TargetProperty="Opacity"
                         From="0" To="1" Duration="0:0:1"/>
                </Storyboard>

                <!-- Nag Fade Out Storyboard -->
                <Storyboard x:Name="FadeOutStoryboard">
                    <DoubleAnimation Storyboard.TargetName="FreeVersionNagOverlay"
                         Storyboard.TargetProperty="Opacity"
                         From="1" To="0" Duration="0:0:1"/>
                </Storyboard>


                <!-- Hint Fade In Storyboard -->
                <Storyboard x:Name="HintFadeInStoryboard">
                    <DoubleAnimation Storyboard.TargetName="InteractiveHintDisplay"
                        Storyboard.TargetProperty="Opacity"
                        From="0" To="1" Duration="0:0:1"/>
                </Storyboard>

                <!-- Hint Fade Out Storyboard -->
                <Storyboard x:Name="HintFadeOutStoryboard">
                    <DoubleAnimation Storyboard.TargetName="InteractiveHintDisplay"
                        Storyboard.TargetProperty="Opacity"
                        From="1" To="0" Duration="0:0:1"/>
                </Storyboard>


                </Grid.Resources>

                <Grid Name="TimerRegion" Grid.Row="0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">

                    <StackPanel x:Name="TimerDisplay"  HorizontalAlignment="Center" VerticalAlignment="Center" >
                        <TextBlock x:Name="TimerTitle" HorizontalAlignment="Center">
                            Title
                        </TextBlock>
                        <TextBlock x:Name="TimerTime" HorizontalAlignment="Center">
                            00 : 00 : 00
                        </TextBlock>
                    </StackPanel>


                    <StackPanel x:Name="NoTimerDefined" Grid.Row="0" Visibility="Collapsed" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock x:Name="NoTimer" HorizontalAlignment="Center" VerticalAlignment="Center" >
                                        No Active Timer
                    </TextBlock>
                </StackPanel>

                </Grid>


                <Grid Name="PomodoroRegion" Grid.Row="0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                    <pd:PomodoroUserControl x:Name="PomodoroControl"></pd:PomodoroUserControl>
                </Grid>


                <Grid x:Name="InteractiveToolbar" Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Top" 
                      Margin="0,4,4,0"
                      >

                    <StackPanel Orientation="Horizontal">

                        <ec:EditBarButton 
                            x:Name="PomodoroButton"
                            Click="InteractiveModePomodoroButton_Click" Glyph="&#xE916;" >
                            <ToolTipService.ToolTip>
                                <ToolTip Content="Pomodoro Mode"/>
                            </ToolTipService.ToolTip>
                        </ec:EditBarButton>

                        <ec:EditBarButton 
                            x:Name="TimerButton"
                            Click="InteractiveModeTimerButton_Click" Glyph="&#xEC92;" >
                            <ToolTipService.ToolTip>
                                <ToolTip Content="Timer Mode"/>
                            </ToolTipService.ToolTip>
                        </ec:EditBarButton>

                        <ec:EditBarButton Click="InteractiveModeSettingsButton_Click" Glyph="&#xE713;" >
                        <ToolTipService.ToolTip>
                            <ToolTip Content="Settings"/>
                        </ToolTipService.ToolTip>
                    </ec:EditBarButton>

                    <ec:EditBarButton Click="InteractiveModeCancelButton_Click" Glyph="&#xE711;"
                          x:Name="InteractiveCancelButton">
                        <ToolTipService.ToolTip>
                            <ToolTip Content="Cancel"/>
                        </ToolTipService.ToolTip>
                    </ec:EditBarButton>

                    </StackPanel>

                </Grid>



                <Grid x:Name="FreeVersionNagOverlay" Grid.Row="0" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,4,4,0" Background="Transparent" Padding="2">

                <Border CornerRadius="5" Background="Black" BorderBrush="DarkGray" BorderThickness="1" Padding="3"  >

                        <TextBlock x:Name="NagText"
                           FontSize="8"
                           Padding="8,0,8,0"
                           Foreground="White"
                            />
                </Border>

            </Grid>



                <Grid x:Name="InteractiveHintDisplay" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,4,4,0" Background="Transparent" Padding="2"
                      >

                    <Border CornerRadius="5" Background="Black" BorderBrush="{StaticResource AccentFillColorDefaultBrush}" BorderThickness="2" Padding="2"  >

                        <TextBlock x:Name="HintText"
                           FontSize="12"
                           Padding="8,0,8,0"
                           Foreground="{StaticResource AccentFillColorDefaultBrush}"
                                  Text="Double-click window to interact"
                            />
                    </Border>

                </Grid>


            </Grid>
        </Border>

        <tb:TaskbarIcon
             x:Name="AppNotifyIcon"
             MenuActivation="LeftOrRightClick"
             ToolTipText="LifeTimer"
             IconSource="/Resources/app_icon.ico"
        >
            <tb:TaskbarIcon.ContextFlyout>
                <MenuFlyout AreOpenCloseAnimationsEnabled="False">
                    <MenuFlyoutItem x:Name="ContextInteractive" Command="{x:Bind Interactive}"  />
                    <MenuFlyoutSeparator />
                    <MenuFlyoutItem Command="{x:Bind Settings}" x:Uid="/LifetimerResources/Resources/MainWindow_NotificationSettings" />
                    <MenuFlyoutSeparator />
                    <MenuFlyoutItem Command="{x:Bind Exit}"  x:Uid="/LifetimerResources/Resources/MainWindow_NotificationExit" />
                </MenuFlyout>
            </tb:TaskbarIcon.ContextFlyout>

        </tb:TaskbarIcon>

    </Grid>




</Window>
