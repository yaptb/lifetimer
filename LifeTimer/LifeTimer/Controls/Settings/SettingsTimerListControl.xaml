<UserControl
    x:Class="LifeTimer.Controls.Settings.SettingsTimerListControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="using:LifeTimer.Converters">

    <UserControl.Resources>
        <converters:DateTimeToTargetStringConverter x:Key="DateTimeToTargetStringConverter" />
    </UserControl.Resources>

    <StackPanel Spacing="12" HorizontalAlignment="Stretch">

        <!-- Add New Timer Button -->
        <StackPanel HorizontalAlignment="Center">
            <Button x:Name="AddTimerButton"
                    Content="Add New Timer"
                    Click="AddTimerButton_Click"
                    Style="{StaticResource AccentButtonStyle}"
                    FontSize="12"
                    Margin="0,0,0,8" />

            <!-- Free Version Limitation Messages -->
            <TextBlock x:Name="TimerListFullFreeBlock"
                       Text="Free version limited to 3 timers. Upgrade to Pro for up to 15 timers."
                       FontStyle="Italic"
                       HorizontalAlignment="Center"
                       Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
                       Visibility="Collapsed" />

            <TextBlock x:Name="TimerListFullProBlock"
                       Text="Pro version limited to 15 timers."
                       FontStyle="Italic"
                       HorizontalAlignment="Center"
                       Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
                       Visibility="Collapsed" />
        </StackPanel>

        <!-- Timer List -->
        <ListView x:Name="TimerListView"
                  MinHeight="300"
                  Width="550"
                  BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
                  BorderThickness="1"
                  CornerRadius="4"
                  HorizontalAlignment="Stretch"
                  SelectionMode="None"
                  Margin="0,0,0,0"
                  Padding="0,0,0,0"
                  >

            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        
                        <Grid  >
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <!-- Timer Info -->
                            <StackPanel Grid.Column="0"
                                        VerticalAlignment="Top"
                                        Margin="0,4,0,0"
                                        Spacing="4">
                                <TextBlock Text="{Binding Title}"
                                           FontWeight="SemiBold"
                                           FontSize="14"
                                           TextWrapping="NoWrap"
                                           TextTrimming="CharacterEllipsis"
                                           Margin="0,0,0,2" />
                                <TextBlock Text="{Binding TargetDateTime, Converter={StaticResource DateTimeToTargetStringConverter}}"
                                           FontSize="12"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                           TextWrapping="NoWrap"
                                           Margin="0,0,0,2"
                                           />
                            </StackPanel>

                            <!-- View Button -->
                            <Button Grid.Column="1"
                                    Content="Activate"
                                    Click="ViewTimerButton_Click"
                                    Tag="{Binding}"
                                    Margin="4,0" 
                                    FontSize="12"
                                    />

                            <!-- Edit Button -->
                            <Button Grid.Column="2"
                                    Content="Edit"
                                    Click="EditTimerButton_Click"
                                    Tag="{Binding}"
                                    Margin="4,0"
                                    />

                            <!-- Delete Button -->
                            <Button Grid.Column="3"
                                    Content="Delete"
                                    Click="DeleteTimerButton_Click"
                                    Tag="{Binding}"
                                    Foreground="{ThemeResource SystemFillColorCriticalBrush}"
                                    Margin="4,0,0,0" />
                        </Grid>
                    <!-- Separator line -->
                    <Border Height="1" Background="Gray" Margin="0,4,0,0"/>
                    </StackPanel>

                    <!--
                    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
              BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
              BorderThickness="0,0,0,1"
                           Padding="4,4"
                            >

                    </Border>
                    -->
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </StackPanel>
</UserControl>